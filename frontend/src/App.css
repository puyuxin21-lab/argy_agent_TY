/* --- ğŸ¨ è®¾è®¡ç³»ç»Ÿå˜é‡ --- */
:root {
  /* å“ç‰Œæ¸å˜è‰²ï¼šå¤§æ°”ã€æ—¶å°šçš„è“ç´«æ¸å˜ */
  --brand-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  /* èƒŒæ™¯è‰²ï¼šææ·¡çš„å†·ç°ï¼Œæ¯”çº¯ç™½æ›´æœ‰è´¨æ„Ÿ */
  --bg-color: #f8f9fa;
  /* æ–‡æœ¬é¢œè‰² */
  --text-primary: #2d3748;
  --text-secondary: #718096;
  /* é˜´å½±ï¼šæŸ”å’Œå¼¥æ•£é˜´å½± */
  --shadow-soft: 0 10px 40px -10px rgba(0, 64, 128, 0.08);
  --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
}

/* å…¨å±€é‡ç½® */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background-color: var(--bg-color);
  color: var(--text-primary);
  line-height: 1.6;
  /* å¢åŠ èƒŒæ™¯çº¹ç†ï¼Œæå‡ç»†èŠ‚æ„Ÿï¼ˆå¯é€‰ï¼‰ */
  background-image: radial-gradient(#e2e8f0 1px, transparent 1px);
  background-size: 20px 20px;

  /* âœ… æ–°å¢ï¼šè®© body å˜æˆ Flex å®¹å™¨ï¼Œå®ç°å…¨å±å±…ä¸­ */
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}

.app-container {
  display: flex;
  flex-direction: column;
  /* âœ… ä¿®æ”¹ï¼šä¸å†æ’‘æ»¡å…¨å±ï¼Œè€Œæ˜¯å›ºå®šæ¯”ä¾‹ï¼Œå½¢æˆæ‚¬æµ®å¡ç‰‡ */
  height: 85vh; /* å æ®è§†å£é«˜åº¦çš„ 85% */
  width: 90vw;  /* å æ®è§†å£å®½åº¦çš„ 90% */
  max-width: 1000px; /* ä¿æŒæœ€å¤§å®½åº¦é™åˆ¶ */

  background-color: rgba(255, 255, 255, 0.85); /* åŠé€æ˜èƒŒæ™¯ */
  backdrop-filter: blur(12px); /* æ¯›ç»ç’ƒæ•ˆæœ */

  /* âœ… æ–°å¢ï¼šæ›´ç«‹ä½“çš„å¤§é˜´å½±å’Œåœ†è§’ */
  box-shadow: 0 20px 60px -10px rgba(0, 0, 0, 0.1), 0 10px 20px -5px rgba(0, 0, 0, 0.05);
  border-radius: 24px; /* å¤§åœ†è§’è®¾è®¡ */
  overflow: hidden;    /* é˜²æ­¢å†…éƒ¨å…ƒç´ æº¢å‡ºåœ†è§’ */
  border: 1px solid rgba(255, 255, 255, 0.6); /* ç»ç’ƒè´¨æ„Ÿè¾¹æ¡† */

  position: relative;
}

/* --- é¡¶éƒ¨æ ‡é¢˜æ  --- */
.header {
  padding: 24px 32px;
  text-align: center; /* å·¦å¯¹é½æ›´æ˜¾æ—¶å°š */
  background: rgba(255, 255, 255, 0.9);
  border-bottom: 1px solid rgba(0, 0, 0, 0.03);
  display: flex;
  flex-direction: column;
  justify-content: center;
  z-index: 10;
}

.header h1 {
  font-size: 1.5rem;
  font-weight: 800;
  background: var(--brand-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent; /* æ–‡å­—æ¸å˜ */
  margin-bottom: 4px;
  letter-spacing: -0.5px;
}

.header p {
  color: var(--text-secondary);
  font-size: 0.85rem;
  font-weight: 500;
  letter-spacing: 0.5px;
  text-transform: uppercase; /* å¤§å†™æ˜¾å¾—æ›´ä¸“ä¸š */
}

/* --- èŠå¤©åŒºåŸŸ --- */
.chat-box {
  flex: 1;
  overflow-y: auto;
  padding: 30px;
  padding-bottom: 140px; /* åº•éƒ¨ç•™ç™½ */
  display: flex;
  flex-direction: column;
  gap: 28px; /* å¢åŠ æ¶ˆæ¯é—´è·ï¼Œæ›´æœ‰å‘¼å¸æ„Ÿ */
  scroll-behavior: smooth;
}

/* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ (Chrome/Safari) */
.chat-box::-webkit-scrollbar {
  width: 6px;
}
.chat-box::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,0.1);
  border-radius: 3px;
}

.message-row {
  display: flex;
  gap: 18px;
  align-items: flex-start;
  max-width: 85%; /* é™åˆ¶å•è¡Œæœ€å¤§å®½åº¦ï¼Œé˜…è¯»æ›´èˆ’é€‚ */
  animation: fadeIn 0.4s ease-out; /* è¿›åœºåŠ¨ç”» */
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.user-row {
  flex-direction: row-reverse;
  align-self: flex-end; /* ç”¨æˆ·æ¶ˆæ¯é å³ */
}

.bot-row {
  align-self: flex-start; /* æœºå™¨äººæ¶ˆæ¯é å·¦ */
}

/* --- å¤´åƒæ ·å¼ --- */
.avatar {
  width: 42px;
  height: 42px;
  border-radius: 12px; /* æ–¹åœ†å½¢æ›´ç°ä»£ */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  box-shadow: var(--shadow-card);
  transition: transform 0.2s;
}

.avatar:hover {
  transform: scale(1.05);
}

.avatar.assistant {
  background: #fff;
  color: #764ba2; /* å“ç‰Œè‰² */
  border: 1px solid #edf2f7;
}

.avatar.user {
  background: var(--brand-gradient);
  color: #fff;
}

/* --- æ°”æ³¡æ ·å¼ --- */
.bubble {
  padding: 16px 22px;
  border-radius: 18px;
  font-size: 1rem;
  line-height: 1.7; /* å¢åŠ è¡Œé«˜ï¼Œæå‡é˜…è¯»ä½“éªŒ */
  letter-spacing: 0.2px;
  position: relative;
  box-shadow: var(--shadow-card);
  word-break: break-word;
}

/* æœºå™¨äººæ°”æ³¡ï¼šå¹²å‡€çš„ç™½å¡ç‰‡ */
.bubble.assistant {
  background-color: #fff;
  color: var(--text-primary);
  border-top-left-radius: 4px; /* å°å°–è§’æ•ˆæœ */
  border: 1px solid rgba(0,0,0,0.02);
}

/* ç”¨æˆ·æ°”æ³¡ï¼šæ—¶å°šçš„æ¸å˜è‰² */
.bubble.user {
  background: var(--brand-gradient);
  color: #fff;
  border-top-right-radius: 4px;
  box-shadow: 0 8px 16px -4px rgba(118, 75, 162, 0.3); /* å½©è‰²æŠ•å½± */
}

/* --- åº•éƒ¨è¾“å…¥åŒºåŸŸ --- */
.input-area {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 24px 32px 32px;
  /* åº•éƒ¨æ¸å˜é®ç½©ï¼Œè®©å†…å®¹æ»‘åŠ¨æ¶ˆå¤± */
  background: linear-gradient(to top, rgba(255,255,255,1) 60%, rgba(255,255,255,0));
  display: flex;
  justify-content: center;
  z-index: 20;
}

.input-wrapper {
  display: flex;
  gap: 12px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  padding: 8px 12px 8px 24px; /* å·¦ä¾§ç•™ç©ºå¤šä¸€ç‚¹ */
  border-radius: 50px; /* å…¨åœ†è§’èƒ¶å›Šå½¢çŠ¶ */
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: var(--shadow-soft);
  width: 100%;
  max-width: 800px;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.input-wrapper:focus-within {
  transform: translateY(-2px);
  box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.1);
  border-color: #764ba2;
}

input {
  flex: 1;
  border: none;
  background: transparent;
  padding: 12px 0;
  font-size: 1rem;
  color: var(--text-primary);
  outline: none;
  font-weight: 500;
}

input::placeholder {
  color: #a0aec0;
  font-weight: 400;
}

button {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: transparent;
  border: none;
  color: #a0aec0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

/* æ¿€æ´»çŠ¶æ€çš„å‘é€æŒ‰é’® */
button:not(:disabled) {
  background: var(--brand-gradient);
  color: white;
  box-shadow: 0 4px 12px rgba(118, 75, 162, 0.3);
}

button:hover:not(:disabled) {
  transform: scale(1.05) rotate(-10deg); /* å¾®å¦™çš„äº¤äº’åŠ¨æ•ˆ */
}

button:disabled {
  background: #f1f5f9;
  cursor: not-allowed;
}

/* --- åŠ è½½åŠ¨ç”» --- */
.spinner {
  animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  color: #764ba2;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-bubble {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-secondary);
  font-style: normal;
  background: transparent !important;
  box-shadow: none !important;
  padding-left: 0;
}